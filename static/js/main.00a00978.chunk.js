(this["webpackJsonpburger-builder"]=this["webpackJsonpburger-builder"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){e.exports={BreadBottom:"BurgerIngredient_BreadBottom__1qQeN",BreadTop:"BurgerIngredient_BreadTop__2Nu1j",Seeds1:"BurgerIngredient_Seeds1__1EVjj",Seeds2:"BurgerIngredient_Seeds2__2MLjl",Meat:"BurgerIngredient_Meat__2xJ1Q",Cheese:"BurgerIngredient_Cheese__PcDFH",Salad:"BurgerIngredient_Salad__3OcQo",Bacon:"BurgerIngredient_Bacon__25qTW"}},,,,,,,function(e,t,n){e.exports={BuildControl:"BuildControl_BuildControl__1EJIe",Label:"BuildControl_Label__3PVtf",Less:"BuildControl_Less__1u4Ze",More:"BuildControl_More__2mY1l"}},,,,function(e,t,n){e.exports={SideDrawer:"SideDrawer_SideDrawer__279US",Open:"SideDrawer_Open__A9zjj",Close:"SideDrawer_Close__hEKuu"}},function(e,t,n){e.exports={BuildControls:"BuildControls_BuildControls__2pQOg",OrderButton:"BuildControls_OrderButton__2OEaD",enable:"BuildControls_enable__pF9ze"}},function(e,t,n){e.exports={Input:"Input_Input__1Xxlq",Invalid:"Input_Invalid__ezkLM",Valid:"Input_Valid__1RXHt"}},,function(e,t,n){e.exports={Toolbar:"Toolbar_Toolbar__PFnlj",DesktopOnly:"Toolbar_DesktopOnly__25XLj"}},function(e,t,n){e.exports={NavItem:"NavItem_NavItem__371_M",active:"NavItem_active__1Left"}},,,,function(e,t,n){e.exports={Button:"Button_Button__3m_dJ",Success:"Button_Success__Vjw2x",Danger:"Button_Danger__emeYn"}},function(e,t,n){e.exports={Input:"authInput_Input__3CbHE",Invalid:"authInput_Invalid__1gToV"}},,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/burger-logo.b8503d26.png"},function(e,t,n){e.exports={Logo:"Logo_Logo__2wm4M"}},function(e,t,n){e.exports={NavItems:"NavItems_NavItems__3bz1d"}},function(e,t,n){e.exports={DrawerToggle:"DrawerToggle_DrawerToggle__1kYD-"}},function(e,t,n){e.exports={Content:"Layout_Content__3-XQW"}},function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__1AJSv"}},,function(e,t,n){e.exports={Burger:"Burger_Burger__38KiN"}},function(e,t,n){e.exports={Modal:"Modal_Modal__csizb"}},function(e,t,n){e.exports={Loader:"Spinner_Loader__zH0Js",load3:"Spinner_load3__10wnC"}},function(e,t,n){e.exports={CheckoutSummary:"CheckoutSummary_CheckoutSummary__2FOjI"}},function(e,t,n){e.exports={ContactInfo:"ContactInfo_ContactInfo__2Q3Gm",Input:"ContactInfo_Input__1L7Ky"}},function(e,t,n){e.exports={Order:"Order_Order__zxgAV"}},function(e,t,n){e.exports={Auth:"Auth_Auth__2yMo8"}},,,function(e,t,n){e.exports=n(89)},,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(21),i=n.n(o),l=(n(66),n(3)),c=n(4),s=n(6),u=n(5),d=n(2),p=n(28),m=n.n(p),h=n(45),g=n.n(h),f=n(46),b=n.n(f),v=function(e){return a.a.createElement("div",{className:b.a.Logo,style:{height:e.height,marginBottom:e.margin}},a.a.createElement("img",{src:g.a,alt:"burger-logo"}))},_=n(47),E=n.n(_),O=n(14),j=n(29),y=n.n(j),k=function(e){return a.a.createElement("li",{className:y.a.NavItem},a.a.createElement(O.c,{activeClassName:y.a.active,to:e.link},e.children))},w=function(e){return a.a.createElement("ul",{className:E.a.NavItems},a.a.createElement(k,{link:"/burger"},"BurgerBuilder"),e.token?a.a.createElement(k,{link:"/my-orders"},"My orders"):null,e.token?a.a.createElement(k,{link:"/logout"},"Logout"):a.a.createElement(k,{link:"/auth"},"Sign Up"))},I=n(48),C=n.n(I),S=function(e){return a.a.createElement("div",{className:C.a.DrawerToggle,onClick:e.openModal},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null))},B=function(e){return a.a.createElement("header",{className:m.a.Toolbar},a.a.createElement(S,{openModal:e.openModal}),a.a.createElement(v,{height:"80%"}),a.a.createElement("div",{className:m.a.DesktopOnly},a.a.createElement(w,{token:e.token})))},M=function(e){return e.children},x=n(49),N=n.n(x),D=n(24),P=n.n(D),L=n(50),T=n.n(L),H=function(e){return e.show?a.a.createElement("div",{className:T.a.Backdrop,onClick:e.closeModal}):null},A=function(e){return console.log("in sidedrawer"),a.a.createElement(M,null,a.a.createElement(H,{show:e.show,closeModal:e.closeModal}),a.a.createElement("div",{className:[P.a.SideDrawer,e.show?P.a.Open:P.a.Close].join(" ")},a.a.createElement(v,{height:"11%",margin:"32px"}),a.a.createElement("nav",null,a.a.createElement(w,{token:e.token}))))},F=n(7),z=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={show:!1},e.closeModalHandler=function(){e.setState({show:!1})},e.openModalHandler=function(){e.setState({show:!0})},e}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement(M,null,a.a.createElement(A,{show:this.state.show,closeModal:this.closeModalHandler,token:this.props.token}),a.a.createElement(B,{token:this.props.token,openModal:this.openModalHandler}),a.a.createElement("main",{className:N.a.Content},this.props.children))}}]),n}(r.Component),U=Object(F.b)((function(e){return{token:e.auth.token}}))(z),V=n(1),q=n(60),W=n(52),R=n.n(W),Y=n(13),X=n.n(Y),J=function(e){var t=null;switch(e.type){case"bread-bottom":t=a.a.createElement("div",{className:X.a.BreadBottom});break;case"bread-top":t=a.a.createElement("div",{className:X.a.BreadTop},a.a.createElement("div",{className:X.a.Seeds1}),a.a.createElement("div",{className:X.a.Seeds2}));break;case"meat":t=a.a.createElement("div",{className:X.a.Meat});break;case"bacon":t=a.a.createElement("div",{className:X.a.Bacon});break;case"salad":t=a.a.createElement("div",{className:X.a.Salad});break;case"cheese":t=a.a.createElement("div",{className:X.a.Cheese});break;default:t=null}return t},Q=function(e){var t;return 0===(t=e.ingredients?Object.keys(e.ingredients).map((function(t){return Object(q.a)(Array(e.ingredients[t])).map((function(e,n){return a.a.createElement(J,{key:t+n,type:t})}))})).reduce((function(e,t){return e.concat(t)}),[]):a.a.createElement("p",null,"Getting ingredients from the Web!")).length&&(t=a.a.createElement("p",null,"Fill with ingredients!")),a.a.createElement("div",{className:R.a.Burger},a.a.createElement(J,{type:"bread-top"}),t,a.a.createElement(J,{type:"bread-bottom"}))},$=n(25),K=n.n($),G=n(20),Z=n.n(G),ee=function(e){return a.a.createElement("div",{className:Z.a.BuildControl},a.a.createElement("div",{className:Z.a.Label},e.label),a.a.createElement("button",{className:Z.a.Less,onClick:e.removed.bind(null,e.type),disabled:e.disabled},"Less"),a.a.createElement("button",{className:Z.a.More,onClick:e.added.bind(null,e.type)},"More"))},te=[{label:"Salad",type:"salad"},{label:"Bacon",type:"bacon"},{label:"Cheese",type:"cheese"},{label:"Meat",type:"meat"}],ne=function(e){return a.a.createElement("div",{className:K.a.BuildControls},a.a.createElement("p",null,"Total price: ",a.a.createElement("strong",null,"$",e.price.toFixed(2))),te.map((function(t){return a.a.createElement(ee,{key:t.label,label:t.label,type:t.type,added:e.addIngredient,removed:e.removeIngredient,disabled:e.disabled[t.type]})})),e.token?a.a.createElement("button",{onClick:e.showModal,className:K.a.OrderButton,disabled:!(e.price>=2)},"ORDER NOW!"):a.a.createElement(O.b,{className:K.a.OrderButton,to:"/auth"},"Sign Up"))},re=n(53),ae=n.n(re),oe=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return e.show!==this.props.show||e.children!==this.props.children}},{key:"render",value:function(){return a.a.createElement(M,null,a.a.createElement(H,{show:this.props.show,closeModal:this.props.closeModal}),a.a.createElement("div",{className:ae.a.Modal,style:{transform:this.props.show?"translateY(0)":"translateY(-100vh)",opacity:this.props.show?"1":"0"}},this.props.children))}}]),n}(r.Component),ie=n(33),le=n.n(ie),ce=function(e){return a.a.createElement("button",{onClick:e.action,disabled:e.disable,className:[le.a.Button,le.a[e.type]].join(" ")},e.name)},se=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this.props.ingredients;return e=t?Object.keys(t).map((function(e){return a.a.createElement("li",{key:e},a.a.createElement("span",{style:{textTransform:"capitalize"}},e),":"," ",t[e],"x")})):a.a.createElement("p",null,"Sorry, couldn't get the data from the Web :("),a.a.createElement(M,null,a.a.createElement("h3",null,"Your Order"),a.a.createElement("p",null,"Delicious Burger with following ingredients:"),a.a.createElement("ul",null,e),a.a.createElement("h3",null,"Total price: $",this.props.totalPrice.toFixed(2)),a.a.createElement("p",null,"Checking out?"),a.a.createElement(ce,{action:this.props.cancel,name:"Cancel",type:"Danger"}),a.a.createElement(ce,{action:this.props.checkOut,name:"Checkout!",type:"Success"}))}}]),n}(r.Component),ue=n(23),de=n.n(ue),pe=de.a.create({baseURL:"https://steel-sequencer-288911.firebaseio.com/"}),me=n(54),he=n.n(me),ge=function(){return a.a.createElement("div",{className:he.a.Loader},"Loading...")},fe=function(e,t){return function(n){Object(s.a)(o,n);var r=Object(u.a)(o);function o(){var e;return Object(l.a)(this,o),(e=r.call(this)).state={error:null},e.errorConfirmedHandler=function(){e.setState({error:null})},e.reqInter=t.interceptors.request.use((function(t){return e.setState({error:null}),t})),e.resInter=t.interceptors.response.use((function(e){return e}),(function(t){e.setState({error:t})})),e}return Object(c.a)(o,[{key:"componentWillUnmount",value:function(){t.interceptors.request.eject(this.reqInter),t.interceptors.response.eject(this.resInter)}},{key:"render",value:function(){return a.a.createElement(M,null,a.a.createElement(oe,{show:this.state.error,closeModal:this.errorConfirmedHandler},this.state.error?this.state.error.message:null),a.a.createElement(e,this.props))}}]),o}(r.Component)},be=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showModal:!1},e.showModal=function(){e.setState({showModal:!0})},e.closeModal=function(){e.setState({showModal:!1})},e.checkOutHandler=function(){e.props.history.push({pathname:"/checkout"})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.initIngredients()}},{key:"render",value:function(){var e=Object(V.a)({},this.props.ingredients),t=null;for(var n in e)e[n]=e[n]<=0;var r=a.a.createElement(se,{ingredients:this.props.ingredients,totalPrice:this.props.totalPrice,cancel:this.closeModal,checkOut:this.checkOutHandler});return this.props.ingredients?t=a.a.createElement(Q,{ingredients:this.props.ingredients}):this.props.error?t=a.a.createElement("h1",null,"An Error occured."):null===this.props.ingredients&&(t=a.a.createElement(ge,null)),a.a.createElement(M,null,a.a.createElement(oe,{show:this.state.showModal,closeModal:this.closeModal},r),t,a.a.createElement(ne,{addIngredient:this.props.addIngredientHandler,removeIngredient:this.props.removeIngredientHandler,disabled:e,price:this.props.totalPrice,showModal:this.showModal,token:this.props.token}))}}]),n}(r.Component),ve=Object(F.b)((function(e){return{ingredients:e.burgerBuilder.ingredients,totalPrice:e.burgerBuilder.totalPrice,error:e.burgerBuilder.error,token:e.auth.token}}),(function(e){return{addIngredientHandler:function(t){return e({type:"add",ingredient:t})},removeIngredientHandler:function(t){return e({type:"remove",ingredient:t})},initIngredients:function(){return e((function(e){pe.get("/ingredients.json").then((function(t){e({type:"set",ingredients:t.data})})).catch((function(t){e({type:"error",error:!0})}))}))}}}))(fe(be,pe)),_e=function(){return{type:"init_auth_fail"}},Ee=n(55),Oe=n.n(Ee),je=Object(F.b)((function(e){return{ingreds:e.burgerBuilder.ingredients,ingredsPrice:e.burgerBuilder.totalPrice,token:e.auth.token}}),(function(e){return{initPurchasing:function(){return e({type:"purchase_init"})}}}))(Object(d.g)((function(e){return a.a.createElement("div",{className:Oe.a.CheckoutSummary},e.token?null:a.a.createElement(d.a,{to:"/burger"}),a.a.createElement("h1",null,"It will taste perfect, won't it?"),a.a.createElement("div",{style:{width:"300px",margin:"auto"}},a.a.createElement(Q,{ingredients:e.ingreds})),a.a.createElement(ce,{type:"Danger",name:"CANCEL",action:function(){return e.history.push("/burger")}}),a.a.createElement(ce,{type:"Success",name:"CONTINUE!",action:function(){e.initPurchasing(),e.history.replace("/checkout/contact-info")}}))}))),ye=n(56),ke=n.n(ye),we=n(26),Ie=n.n(we),Ce=function(e){return a.a.createElement("div",{className:[Ie.a.Input,"true"===e.valid?Ie.a.Valid:Ie.a.Invalid].join(" ")},a.a.createElement("input",e))},Se=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={customer:{name:{value:"",valid:!1,regex:/\D+/},email:{value:"",valid:!1,regex:/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/},address:{value:"",valid:!1,regex:/^\d+\s[A-z]+\s[A-z]+/}},loading:!1,validationPassed:null},e.orderHandler=function(t){if(e.props.token){for(var n in console.log(e.props.token),e.state.customer)if(!e.state.customer[n].valid)return void e.setState({validationPassed:!1});e.setState({loading:!0}),e.setState({validationPassed:!0});var r={ingredients:e.props.ingreds,price:e.props.ingredsPrice,customer:{name:e.state.name.value,email:e.state.email.value,address:e.state.address.value}};e.props.purchase(r,e.props.token)}else t.preventDefault()},e.isValid=function(e,t){return t.test(e)},e.inputChangeHandler=function(t,n){var r=Object(V.a)({},e.state.customer);e.setState({validationPassed:null}),r[n].value=t.target.value,r[n].valid=e.isValid(r[n].value,r[n].regex),e.setState(Object(V.a)({},r))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this;console.log(this.props.purchased);var t=a.a.createElement(a.a.Fragment,null,this.props.purchased?a.a.createElement(d.a,{to:"/burger"}):null,a.a.createElement("h3",null,"Enter your contact information"),a.a.createElement("form",{onSubmit:this.orderHandler},a.a.createElement(Ce,{type:"text",name:"name",placeholder:"Enter your name",valid:this.state.customer.name.valid.toString(),onChange:function(t){return e.inputChangeHandler(t,"name")},value:this.state.customer.name.value}),a.a.createElement(Ce,{type:"text",name:"email",placeholder:"Enter your email",valid:this.state.customer.email.valid.toString(),onChange:function(t){return e.inputChangeHandler(t,"email")},value:this.state.customer.email.value}),a.a.createElement(Ce,{type:"text",name:"address",placeholder:"Address ('1905 year street')",valid:this.state.customer.address.valid.toString(),onChange:function(t){return e.inputChangeHandler(t,"address")},value:this.state.customer.address.value}),a.a.createElement(ce,{type:"Success",name:"ORDER!"})));return a.a.createElement("div",{className:ke.a.ContactInfo},this.props.purchasing?a.a.createElement(ge,null):t,!1===this.state.validationPassed?a.a.createElement("h1",{style:{color:"red",fontSize:"20px"}},"Form filled wrong!"):null)}}]),n}(r.Component),Be=Object(F.b)((function(e){return{ingreds:e.burgerBuilder.ingredients,ingredsPrice:e.burgerBuilder.totalPrice,purchasing:e.order.purchasing,purchased:e.order.purchased,token:e.auth.token}}),(function(e){return{purchase:function(t,n){return e(function(e,t){return function(n){n({type:"start_purchasing"}),pe.post("/orders.json?auth="+t,e).then((function(e){console.log(e),n({type:"order_success"})})).catch((function(e){n(function(e){return{type:"order_fail",error:e}}(e))}))}}(t,n))},initPurchasing:function(){return e({type:"purchase_init"})}}}))(Object(d.g)(fe(Se,pe))),Me=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement("div",null,this.props.price?null:a.a.createElement(d.a,{to:"/burger"}),a.a.createElement(je,{ingredients:this.props.ingreds,price:this.props.price}),a.a.createElement(d.b,{path:this.props.match.url+"/contact-info",component:Be}))}}]),n}(r.Component),xe=Object(F.b)((function(e){return{ingreds:e.burgerBuilder.ingredients,price:e.burgerBuilder.totalPrice}}))(Me),Ne=n(57),De=n.n(Ne),Pe=function(e){var t=Object.keys(null==e.ingredients?{}:e.ingredients).map((function(t){return t.toUpperCase()+" "+e.ingredients[t]+"x"})).join(", ");return a.a.createElement("div",{className:De.a.Order},a.a.createElement("p",null,"Ingredients: ",t),a.a.createElement("p",null,"Price: ",a.a.createElement("strong",null,"$",e.price)))},Le=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.initOrders(this.props.token)}},{key:"render",value:function(){var e=null;return console.log(this.props.orders),this.props.ordersFetched?this.props.ordersFetched&&(e=0===this.props.orders.length?a.a.createElement("h1",null,"You don't have any orders yet :("):this.props.orders.map((function(e){return a.a.createElement(Pe,{key:Math.random(),ingredients:e.ingredients,price:e.price})}))):e=a.a.createElement(ge,null),this.props.error&&(e=a.a.createElement("h1",null,"You are not authorized!")),a.a.createElement("div",null,this.props.token?e:a.a.createElement(d.a,{to:"/burger"}))}}]),n}(r.Component),Te=Object(F.b)((function(e){return{orders:e.order.orders,ordersFetched:e.order.fetchedOrders,token:e.auth.token,error:e.order.error}}),(function(e){return{initOrders:function(t){return e(function(e){return function(t){pe.get("/orders.json?auth="+e).then((function(e){var n=[];for(var r in e.data)n.push(e.data[r]);t({type:"init_orders",value:n})})).catch((function(e){t(_e())}))}}(t))}}}))(fe(Le,pe)),He=n(34),Ae=n.n(He),Fe=function(e){return a.a.createElement("div",{className:[Ae.a.Input,!1===e.valid?Ae.a.Invalid:""].join(" ")},a.a.createElement("input",{type:e.type,onChange:e.onChange,placeholder:e.name,value:e.value}))},ze=n(58),Ue=n.n(ze),Ve=function(e){return{type:"login_success",loginData:e}},qe=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),{type:"logout"}},We=function(e){return function(t){setTimeout((function(){return t(qe())}),1e3*e)}},Re=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={email:{value:"",valid:"",regex:/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/},password:{value:"",valid:"",regex:/.{6,}/},signInMode:!1},e.isValid=function(e,t){return t.test(e)},e.submitLoginForm=function(t){t.preventDefault();var n=Object(V.a)({},e.state);n.email.valid=e.isValid(e.state.email.value,e.state.email.regex),n.password.valid=e.isValid(e.state.password.value,e.state.password.regex),e.setState(n),e.state.email.valid&&e.state.password.valid&&e.props.onLogin(e.state.email.value,e.state.password.value,e.state.signInMode)},e.onChangeHandler=function(t,n){var r=Object(V.a)({},e.state);r[n].value=t.target.value,e.setState(r)},e.toggleAuthForm=function(){e.props.clearError(),e.setState((function(t){return Object(V.a)(Object(V.a)({},e.state),{},{signInMode:!t.signInMode,email:Object(V.a)(Object(V.a)({},e.state.email),{},{valid:""}),password:Object(V.a)(Object(V.a)({},e.state.password),{},{valid:""})})}))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,this.props.token&&this.props.burgerPrice>=2?a.a.createElement(d.a,{to:"/checkout"}):this.props.token?a.a.createElement(d.a,{to:"/burger"}):null,this.props.loading?a.a.createElement(ge,null):a.a.createElement("div",{className:Ue.a.Auth},a.a.createElement("form",{onSubmit:function(t){return e.submitLoginForm(t)}},a.a.createElement("h1",{style:{margin:"auto"}},this.state.signInMode?"Sign In":"Sign Up"),a.a.createElement("p",{style:{color:"red",margin:"auto",fontSize:"20px"}},this.props.error&&!this.state.signInMode?"Email is already registered":this.props.error?"Entered wrong data":null),a.a.createElement(Fe,{onChange:function(t){return e.onChangeHandler(t,"email")},name:"Email",type:"text",valid:this.state.email.valid,value:this.state.email.value}),a.a.createElement(Fe,{onChange:function(t){return e.onChangeHandler(t,"password")},name:"Password",type:"password",valid:this.state.password.valid,value:this.state.password.value}),a.a.createElement("button",{type:"submit"},this.state.signInMode?"Sign In":"Sign Up")),a.a.createElement("button",{onClick:this.toggleAuthForm},"Switch to"," ",this.state.signInMode?"Sign Up":"Sign In")))}}]),n}(r.Component),Ye=Object(F.b)((function(e){return{token:e.auth.token,userId:e.auth.userId,loading:e.auth.loading,error:e.auth.error,burgerPrice:e.burgerBuilder.totalPrice}}),(function(e){return{onLogin:function(t,n,r){return e(function(e,t,n){return function(r){r({type:"login_start"});var a=n?"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDy_nwRGXeKFxjCq9PeUY6bqbc35-apz14":"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyDy_nwRGXeKFxjCq9PeUY6bqbc35-apz14";de.a.post(a,{email:e,password:t,returnSecureToken:!0}).then((function(e){console.log(e);var t=new Date((new Date).getTime()+1e3*e.data.expiresIn);localStorage.setItem("token",e.data.idToken),localStorage.setItem("expirationDate",t),localStorage.setItem("userId",e.data.localId),r(Ve(e.data)),r(We(e.data.expiresIn))})).catch((function(e){console.log(e),r(function(e){return{type:"login_fail",error:e}}(e))}))}}(t,n,r))},clearError:function(){return e({type:"clear_error"})}}}))(Re),Xe=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.logout()}},{key:"render",value:function(){return a.a.createElement(d.a,{to:"/auth"})}}]),n}(r.Component),Je=Object(F.b)(null,(function(e){return{logout:function(){return e(qe())}}}))(Xe),Qe=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.checkAuth()}},{key:"render",value:function(){return a.a.createElement(U,null,a.a.createElement(d.d,null,a.a.createElement(d.b,{path:"/burger",component:ve}),a.a.createElement(d.b,{path:"/checkout",component:xe}),a.a.createElement(d.b,{path:"/my-orders",component:Te}),a.a.createElement(d.b,{path:"/auth",component:Ye}),a.a.createElement(d.b,{path:"/logout",component:Je}),a.a.createElement(d.a,{from:"/",to:"/burger"})))}}]),n}(r.Component),$e=Object(F.b)((function(e){return{token:e.auth.token}}),(function(e){return{checkAuth:function(){return e((function(e){var t=localStorage.getItem("token");if(t){var n=localStorage.getItem("userId"),r=new Date(localStorage.getItem("expirationDate"));r<new Date?e(qe()):(e(Ve({idToken:t,localId:n})),e(We((r.getTime()-(new Date).getTime())/1e3)))}else e(qe())}))}}}))(Qe),Ke=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ge(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Ze=n(16),et=n(59),tt=n(19),nt={ingredients:null,totalPrice:1,error:!1},rt={salad:.25,bacon:2,cheese:1,meat:3},at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"add":return Object(V.a)(Object(V.a)({},e),{},{ingredients:Object(V.a)(Object(V.a)({},e.ingredients),{},Object(tt.a)({},t.ingredient,e.ingredients[t.ingredient]+1)),totalPrice:e.totalPrice+rt[t.ingredient]});case"remove":return Object(V.a)(Object(V.a)({},e),{},{ingredients:Object(V.a)(Object(V.a)({},e.ingredients),{},Object(tt.a)({},t.ingredient,e.ingredients[t.ingredient]-1)),totalPrice:e.totalPrice-rt[t.ingredient]});case"set":return Object(V.a)(Object(V.a)({},e),{},{ingredients:{salad:t.ingredients.salad,bacon:t.ingredients.bacon,cheese:t.ingredients.cheese,meat:t.ingredients.meat},totalPrice:1});case"error":return Object(V.a)(Object(V.a)({},e),{},{error:t.error});default:return e}},ot={orders:null,fetchedOrders:!1,purchasing:!1,purchased:!1,error:!1},it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"order_success":return Object(V.a)(Object(V.a)({},e),{},{purchasing:!1,purchased:!0});case"order_fail":return Object(V.a)(Object(V.a)({},e),{},{purchasing:!1,purchased:!1});case"start_purchasing":return Object(V.a)(Object(V.a)({},e),{},{purchasing:!0,purchased:!1});case"purchase_init":return Object(V.a)(Object(V.a)({},e),{},{purchased:!1});case"init_orders":return Object(V.a)(Object(V.a)({},e),{},{orders:t.value,fetchedOrders:!0,error:!1});case"init_auth_fail":return Object(V.a)(Object(V.a)({},e),{},{fetchedOrders:!1,error:!0});default:return e}},lt={token:null,userId:null,error:!1,loading:!1},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login_start":return Object(V.a)(Object(V.a)({},e),{},{loading:!0});case"login_success":return Object(V.a)(Object(V.a)({},e),{},{userId:t.loginData.localId,token:t.loginData.idToken,loading:!1,error:!1});case"login_fail":return Object(V.a)(Object(V.a)({},e),{},{error:t.error,loading:!1});case"clear_error":return Object(V.a)(Object(V.a)({},e),{},{error:!1});case"logout":return Object(V.a)(Object(V.a)({},e),{},{userId:null,token:null});default:return e}},st=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ze.d,ut=Object(Ze.c)({order:it,burgerBuilder:at,auth:ct}),dt=Object(Ze.e)(ut,st(Object(Ze.a)(et.a))),pt=a.a.createElement(F.a,{store:dt},a.a.createElement(O.a,{basename:"/burger-builder"},a.a.createElement($e,null)));i.a.render(pt,document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/burger-builder",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/burger-builder","/service-worker.js");Ke?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ge(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):Ge(e)}))}}()}],[[61,1,2]]]);
//# sourceMappingURL=main.00a00978.chunk.js.map